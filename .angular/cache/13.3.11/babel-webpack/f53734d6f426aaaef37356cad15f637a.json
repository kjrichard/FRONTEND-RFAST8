{"ast":null,"code":"import _classCallCheck from \"C:\\\\FRONTEND-RFAST8\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\FRONTEND-RFAST8\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { __decorate, __metadata } from \"tslib\";\nimport { ViewChild, ElementRef } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { UsuariosService } from './../../services/usuarios.service';\nimport Swal from 'sweetalert2';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Router } from '@angular/router';\n\nvar UserComponent = /*#__PURE__*/function () {\n  function UserComponent(usuariosService, fb, modalService, router) {\n    _classCallCheck(this, UserComponent);\n\n    this.usuariosService = usuariosService;\n    this.fb = fb;\n    this.modalService = modalService;\n    this.router = router;\n    this.listaUsuarios = [];\n    this.listaPermisos = [];\n    this.usuarioFormulario = null;\n    this.usuarioFormularioActualizar = null;\n    this.listaPerfiles = [];\n    this.permisosSeleccionados = [];\n    this.permisos = [];\n    this.inputIsEmpty = true;\n  }\n\n  _createClass(UserComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this = this;\n\n      this.obtenerUsuario();\n      this.obtenerPerfil();\n      this.usuarioFormulario = this.fb.group({\n        email: ['', [Validators.required, Validators.pattern('[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}')]],\n        nombres: ['', [Validators.required]],\n        apellidos: ['', [Validators.required]],\n        id_perfil: ['', [Validators.required]],\n        permisos: [[], [Validators.required]],\n        cedula: ['', [Validators.required, Validators.min(7)]]\n      });\n      this.usuarioFormularioActualizar = this.fb.group({\n        email: ['', [Validators.required, Validators.pattern('[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}')]],\n        nombres: ['', [Validators.required]],\n        apellidos: ['', [Validators.required]],\n        id_perfil: ['', [Validators.required]],\n        permisos: [[], [Validators.required]],\n        cedula: ['', [Validators.required, Validators.min(7)]],\n        id: ['']\n      });\n      this.obtenerPermisos();\n      this.searchInput.nativeElement.addEventListener('input', function () {\n        if (_this.searchInput.nativeElement.value.trim() !== '') {\n          _this.clearButton.nativeElement.removeAttribute('disabled');\n        } else {\n          _this.clearButton.nativeElement.setAttribute('disabled', 'true');\n        }\n      });\n    } // ...\n\n  }, {\n    key: \"crearUsuario\",\n    value: function crearUsuario() {\n      var _this2 = this;\n\n      var formularioValues = this.usuarioFormulario.value;\n      console.log(formularioValues);\n      this.usuariosService.crearUsuario(this.usuarioFormulario.value).subscribe(function (res) {\n        _this2.usuarioFormulario.reset();\n\n        _this2.obtenerUsuario();\n\n        Swal.fire({\n          position: 'center',\n          icon: 'success',\n          title: 'GUARDO OK',\n          text: res.message,\n          showConfirmButton: false,\n          timer: 3500\n        });\n      }, function (error) {\n        console.log(error);\n        Swal.fire({\n          position: 'center',\n          icon: 'error',\n          title: 'VERIFIQUE CONEXION: ',\n          text: error.error.message,\n          showConfirmButton: false,\n          timer: 3500\n        });\n      });\n    } // ...\n\n  }, {\n    key: \"actualizarUsuario\",\n    value: function actualizarUsuario() {\n      var _this3 = this;\n\n      this.usuariosService.actualizarUsuario(this.usuarioFormularioActualizar.value, this.id_usuario).subscribe(function (res) {\n        _this3.permisos = [];\n\n        _this3.usuarioFormularioActualizar.controls['permisos'].setValue([]);\n\n        _this3.listaPermisos = [];\n\n        _this3.obtenerUsuario();\n\n        _this3.obtenerPermisos();\n\n        _this3.reloadPage();\n\n        Swal.fire({\n          position: 'center',\n          icon: 'success',\n          title: 'ACTUALIZADO OK',\n          text: res.msg,\n          showConfirmButton: false,\n          timer: 3500\n        });\n      }, function (error) {\n        console.log(error);\n        Swal.fire({\n          position: 'center',\n          icon: 'error',\n          title: 'VERIFIQUE CONEXION: ',\n          text: error.error.message,\n          showConfirmButton: false,\n          timer: 3500\n        });\n      });\n    } // ...\n\n  }, {\n    key: \"reloadPage\",\n    value: function reloadPage() {\n      var _this4 = this;\n\n      var currentUrl = this.router.url;\n      this.router.navigateByUrl('/', {\n        skipLocationChange: true\n      }).then(function () {\n        _this4.router.navigate([currentUrl]);\n      });\n    }\n  }]);\n\n  return UserComponent;\n}();\n\n__decorate([ViewChild('searchInput'), __metadata(\"design:type\", ElementRef)], UserComponent.prototype, \"searchInput\", void 0);\n\n__decorate([ViewChild('clearButton'), __metadata(\"design:type\", ElementRef)], UserComponent.prototype, \"clearButton\", void 0);\n\nUserComponent = __decorate([Component({\n  selector: \"app-user\",\n  templateUrl: \"user.component.html\"\n}), __metadata(\"design:paramtypes\", [UsuariosService, FormBuilder, NgbModal, Router])], UserComponent);\nexport { UserComponent };","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _createForOfIteratorHelper from \"C:\\\\FRONTEND-RFAST8\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:\\\\FRONTEND-RFAST8\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\FRONTEND-RFAST8\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { NgbModal, ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\nimport { CursoVidaService } from 'src/app/services/curso-vida.service';\nimport Swal from 'sweetalert2';\nimport { HttpClient } from '@angular/common/http';\n\nvar PrimeraInfanciaComponent = /*#__PURE__*/function () {\n  function PrimeraInfanciaComponent(cursoVidaService, modalService, http) {\n    _classCallCheck(this, PrimeraInfanciaComponent);\n\n    this.cursoVidaService = cursoVidaService;\n    this.modalService = modalService;\n    this.http = http;\n    this.cursoVidaData = [];\n    this.total = 0;\n    this.page = 1;\n    this.totalpage = 0;\n    this.itemperpage = 0;\n    this.islast = false;\n    this.atendidos = 0;\n    this.noAtendidos = 0;\n    this.paciente = {};\n    this.spinner = false;\n    this.arrayId = [];\n    this.isSearch = false;\n    this.codigo = 1600;\n    this.edadInicial = 0;\n    this.edadFinal = 5;\n    this.excelData = [];\n    this.data = [];\n    this.excel = \"\";\n    this.baseUrl = \"http://127.0.0.1:3000/exportar-excel/\";\n    this.codigoServiciosDisponibles = [];\n    this.isCollapsed = true;\n    this.excel = \"\".concat(this.baseUrl).concat(this.codigo, \"/\").concat(this.edadInicial, \"/\").concat(this.edadFinal);\n  }\n\n  _createClass(PrimeraInfanciaComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this.obtenerCursoVida();\n      this.filtrarCodigoServiciosDisponibles();\n      this.spinner;\n    }\n  }, {\n    key: \"obtenerCursoVida\",\n    value: function obtenerCursoVida() {\n      var _this = this;\n\n      this.cursoVidaService.obtenerCursoVida(this.page, this.codigo, this.edadInicial, this.edadFinal).subscribe(function (res) {\n        _this.total = res.total;\n        _this.itemperpage = res.itemperpage;\n        _this.totalpage = res.totalpage;\n        _this.islast = res.islast;\n        _this.cursoVidaData = res.data;\n        _this.atendidos = res.atendidos;\n        _this.noAtendidos = res.noAtendidos;\n        _this.spinner = true;\n        _this.arrayId = [];\n        /* console.log(this.cursoVidaData); */\n      });\n    }\n  }, {\n    key: \"filtrarCodigoServiciosDisponibles\",\n    value: function filtrarCodigoServiciosDisponibles() {\n      var _iterator = _createForOfIteratorHelper(this.cursoVidaData),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var data = _step.value;\n\n          for (var _i = 0, _Object$keys = Object.keys(data); _i < _Object$keys.length; _i++) {\n            var codigoServicio = _Object$keys[_i];\n\n            if (data[codigoServicio] !== null) {\n              // Si el valor no es null, agrégalo a la lista de códigos disponibles\n              if (!this.codigoServiciosDisponibles.includes(codigoServicio)) {\n                this.codigoServiciosDisponibles.push(codigoServicio);\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"buscarCursoVida1\",\n    value: function buscarCursoVida1() {\n      var _this2 = this;\n\n      this.cursoVidaService.buscarCursoVida(this.page, this.arrayId, this.codigo, this.edadInicial, this.edadFinal).subscribe(function (res) {\n        _this2.total = res.total;\n        _this2.itemperpage = res.itemperpage;\n        _this2.totalpage = res.totalpage;\n        _this2.islast = res.islast;\n        _this2.cursoVidaData = res.data;\n        _this2.atendidos = res.atendidos;\n        _this2.noAtendidos = res.noAtendidos;\n        _this2.spinner = true;\n        _this2.isSearch = true;\n      }, function (error) {\n        if (error.status === 404) {\n          Swal.fire({\n            position: 'center',\n            icon: 'error',\n            title: 'Este Documento: ',\n            text: \"\".concat(_this2.arrayId, \", No Pertenece a este Curso de Vida\"),\n            showConfirmButton: false,\n            timer: 6500\n          });\n        }\n      });\n    }\n  }, {\n    key: \"pageSiguiente\",\n    value: function pageSiguiente() {\n      var _this3 = this;\n\n      this.page = this.page + 1;\n\n      if (this.isSearch) {\n        this.buscarCursoVida1();\n      } else {\n        this.cursoVidaService.obtenerCursoVida(this.page, this.codigo, this.edadInicial, this.edadFinal).subscribe(function (res) {\n          _this3.total = res.total;\n          _this3.itemperpage = res.itemperpage;\n          _this3.totalpage = res.totalpage;\n          _this3.islast = res.islast;\n          _this3.cursoVidaData = res.data;\n          _this3.arrayId = [];\n          _this3.spinner = true;\n        });\n      }\n    }\n  }, {\n    key: \"pageAtras\",\n    value: function pageAtras() {\n      var _this4 = this;\n\n      this.page = this.page - 1;\n\n      if (this.isSearch) {\n        this.buscarCursoVida1();\n      } else {\n        this.cursoVidaService.obtenerCursoVida(this.page, this.codigo, this.edadInicial, this.edadFinal).subscribe(function (res) {\n          _this4.total = res.total;\n          _this4.itemperpage = res.itemperpage;\n          _this4.totalpage = res.totalpage;\n          _this4.islast = res.islast;\n          _this4.cursoVidaData = res.data;\n          _this4.arrayId = [];\n          _this4.spinner = true;\n        });\n      }\n    }\n  }, {\n    key: \"open\",\n    value: function open(content) {\n      var _this5 = this;\n\n      this.modalService.open(content, {\n        windowClass: 'modal-search'\n      }).result.then(function (result) {\n        _this5.closeResult = \"Closed with: \".concat(result);\n      }, function (reason) {\n        _this5.closeResult = \"Dismissed \".concat(_this5.getDismissReason(reason));\n      });\n    }\n  }, {\n    key: \"modalOpen\",\n    value: function modalOpen(basicmodal, paciente) {\n      this.modalService.open(basicmodal, {\n        size: 'lg',\n        scrollable: true\n      });\n      this.paciente = paciente;\n    }\n  }, {\n    key: \"getDismissReason\",\n    value: function getDismissReason(reason) {\n      if (reason === ModalDismissReasons.ESC) {\n        return 'by pressing ESC';\n      } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n        return 'by clicking on a backdrop';\n      } else {\n        return \"with: \".concat(reason);\n      }\n    }\n  }, {\n    key: \"buscar\",\n    value: function buscar(event) {\n      var identificacion = event.target.value;\n\n      if (identificacion.includes(',')) {\n        this.arrayId.push(identificacion.substring(0, identificacion.length - 1));\n        event.target.value = '';\n      }\n    }\n  }]);\n\n  return PrimeraInfanciaComponent;\n}();\n\nPrimeraInfanciaComponent = __decorate([Component({\n  selector: 'app-primera-infancia',\n  templateUrl: './primera-infancia.component.html',\n  styleUrls: ['./primera-infancia.component.scss']\n}), __metadata(\"design:paramtypes\", [CursoVidaService, NgbModal, HttpClient])], PrimeraInfanciaComponent);\nexport { PrimeraInfanciaComponent };","map":null,"metadata":{},"sourceType":"module"}